<div align="center">

# Template Golang Project

![Go Version](https://img.shields.io/github/go-mod/go-version/mundoalem/template-golang-project)
![Release Version](https://img.shields.io/github/v/release/mundoalem/template-golang-project)
![License](https://img.shields.io/github/license/mundoalem/template-golang-project)
![Pipeline Status](https://github.com/mundoalem/template-golang-project/actions/workflows/pipeline.yml/badge.svg)
[![codecov](https://codecov.io/gh/mundoalem/template-golang-project/branch/main/graph/badge.svg?token=R0HJ0SAOC0)](https://codecov.io/gh/mundoalem/template-golang-project)
![Issues](https://img.shields.io/github/issues/mundoalem/template-golang-project)
![Contributors](https://img.shields.io/github/contributors/mundoalem/template-golang-project)

A DevOps centric template to bootstrap Go projects.

</div>

## Introduction

This project is a template anyone can use in order to bootstrap a project using the Go
programming language. The template has a full feature pipeline following the latest DevOps
practices.

You can find [here](https://github.com/golang-standards/project-layout)
a full explanation of the directory structure.

You can control the project through the use of `[mage](https://magefile.org/)`, it accepts
the following targets:

| Argument | Description                                                       |
| -------- | --------------------------------------------------------------    |
| build    | Runs `go build` saving the final assets in `build` directory      |
| clean    | Removes compiled binaries generated by the build step             |
| lint     | Runs `go fmt` for `cmd`, `internal` and `pkg` directories         |
| lock     | Install dependencies from `go.mod`                                |
| release  | Creates a package and, if in pipeline, also creates a release (1) |
| reset    | Removes installed dependencies                                    |
| scan     | Runs vulnerability scans                                          |
| test     | Runs all tests                                                    |

1. The package will be created for the supported platforms

## License

[GPLv3](https://choosealicense.com/licenses/gpl-3.0/)

## Tech Stack

These are the software baked in this template:

- [Go](https://www.python.org/) 1.16.5
- [Cli](github.com/mitchellh/cli)

Example:

```bash
$ mage lint
$ mage test
$ mage build
$ mage release
```

## Environment Variables

If you wish to use the [Codecov](https://www.codecov.io/) and [Snyk](https://www.snyk.io/) make
sure you set the following environment secrets in your pipeline.

`CODECOV_TOKEN`

`SNYK_TOKEN`

In the pipeline the build script also looks into a few environment variables that are set by GitHub
automatically but are not available locally:

`CI`

`GITHUB_SHA`

## FAQ

### Will there ever be support for other continuous integration platforms?

Right now I have no plans to support other platforms like TravisCI, CircleCI or
Gitlab. Anyway, it should be quite easy for you to port the GitHub Actions to
any platform you like.

The reason for that is that I don't want to have a `.travis.yml`, a
`circleci.yml` and a `.gitlab-ci.yml` all together in the same place when only
one would actually be used. So I want to avoid (for now) cluttering the
template with too many files that might or might not be useful.

### Do you have plans to build and release for multiple architectures?

Yes, right now the pipeline will only build for the current architecture which
will be a *nix system. In the future I want to be able to support a parallel
build for all **supported** platforms.
