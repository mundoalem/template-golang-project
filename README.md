# golang-project-template

![Go Version](https://img.shields.io/github/go-mod/go-version/egonbraun/golang-project-template) ![Release Version](https://img.shields.io/github/v/release/egonbraun/golang-project-template) ![License](https://img.shields.io/github/license/egonbraun/golang-project-template) ![Pipeline Status](https://github.com/egonbraun/golang-project-template/actions/workflows/pipeline.yml/badge.svg) [![codecov](https://codecov.io/gh/egonbraun/golang-project-template/branch/main/graph/badge.svg?token=R0HJ0SAOC0)](https://codecov.io/gh/egonbraun/golang-project-template) ![Issues](https://img.shields.io/github/issues/egonbraun/golang-project-template) ![Contributors](https://img.shields.io/github/contributors/egonbraun/golang-project-template)

A template to scaffold a Golang project.

You can find it [here](https://github.com/golang-standards/project-layout)
a full explanation of the directory structure.

You can control the project through the script `scripts/project.sh`, you can
pass it the following arguments:

| Argument | Description                                                       |
| -------- | --------------------------------------------------------------    |
| build    | Runs `go build` saving the final assets in `build` directory      |
| clean    | Removes compiled binaries generated by the build step             |
| lint     | Runs `go fmt` for `cmd`, `internal` and `pkg` directories         |
| lock     | Install dependencies from `go.mod`                                |
| release  | Creates a package and, if in pipeline, also creates a release (1) |
| reset    | Removes installed dependencies                                    |
| run      | Builds and runs the project (2)                                   |
| scan     | Runs vulnerability scans
| test     | Runs all tests                                                    |

1. The package will be created for the current architecture
2. Any extra arguments will be passed through to the executable

Example:

```bash
$ scripts/project.sh lint
$ scripts/project.sh test
$ scripts/project.sh build
$ scripts/project.sh release
```

## Environment Variables

If you wish to use the [Codecov](https://www.codecov.io/) and [Snyk](https://www.snyk.io/) make sure you set the
following environment secrets in your pipeline.

`CODECOV_TOKEN`

`SNYK_TOKEN`

## FAQ

### Is Windows supported?

You can use the template to create your project on Windows however the script
`scripts/project.sh` will not work natively since it was written for Unix
shells like `sh`, `zsh` and `bash`. So, right now, while a PowerShell version
is still in the backlog, you will have to either use Cygwin or WSL to fully use
the template.

### Will there ever be support for other continuous integration platforms?

Right now I have no plans to support other platforms like TravisCI, CircleCI or
Gitlab. Anyway, it should be quite easy for you to port the GitHub Actions to
any platform you like.

The reason for that is that I don't want to have a `.travis.yml`, a
`circleci.yml` and a `.gitlab-ci.yml` all together in the same place when only
one would actually be used. So I want to avoid (for now) cluttering the
template with too many files that might or might not be useful.

### Do you have plans to build and release for multiple architectures?

Yes, right now the pipeline will only build for the current architecture which
will be a *nix system. In the future I want to be able to support a parallel
build for all **supported** platforms.
